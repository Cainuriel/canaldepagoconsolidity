{"version":3,"sources":["Intro.js","InsertMoney.js","PayCheck.js","App.js","reportWebVitals.js","index.js"],"names":["Intro","async","init","window","ethereum","accountConnection","request","method","subint","substr","subfinal","document","querySelector","innerHTML","Swal","fire","title","text","showCancelButton","confirmButtonText","imageUrl","imageAlt","then","result","isConfirmed","open","useEffect","on","changeAccounts","_jsxs","className","children","_jsx","src","width","alt","id","onClick","type","params","chainId","chainName","rpcUrls","nativeCurrency","name","symbol","decimals","blockExplorerUrls","addNetwork","InsertMoney","amount","setAmount","useState","balance","setBalance","payContract","network","setNetwork","BINANCENETWORK","doubleCheck","setDoubleChek","takeNetwork","console","log","provider","ethers","providers","Web3Provider","getNetwork","moreMoney","account","signer","getSigner","contract","Contract","ReceiverPays","abi","bnbAmount","utils","parseEther","toString","tx","value","showConfirmButton","imageWidth","imageHeight","wait","concat","html","hash","icon","getBalanceUser","err","mensajeError","message","networkData","isInNetwork","contractUserBalance","recipientBalance","formatEther","Number","parseFloat","toFixed","onChange","e","target","replace","htmlFor","PayCheck","nonce","setNonce","payer","setPayer","signedHash","setSignedHash","claimPayment","from","data","payCheck","App","recipient","setRecipient","Math","floor","Date","getTime","user","setUser","contractAddress","setContractAddress","clipboard","setClipboard","useClippy","condition","setCondition","href","rel","disabled","Signature","getMessageHash","sig","showDenyButton","denyButtonText","isDenied","signPayment","style","backgroundColor","reportWebVitals","onPerfEntry","Function","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3dfbb973.chunk.js","sourcesContent":["import { useEffect } from 'react';\r\nimport React  from 'react';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst Intro = () => {\r\n\r\n      useEffect(function () {\r\n        changeAccounts();\r\n      },[]);\r\n\r\n      async function addNetwork() {\r\n\r\n        let networkData = [{\r\n                chainId: \"0x61\",\r\n                chainName: \"BSCTESTNET\",\r\n                rpcUrls: [\"https://data-seed-prebsc-2-s3.binance.org:8545\"],\r\n                nativeCurrency: {\r\n                  name: \"BINANCE COIN\",\r\n                  symbol: \"BNB\",\r\n                  decimals: 18,\r\n                },\r\n                blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\r\n              },\r\n            ];\r\n    \r\n          // agregar red o cambiar red\r\n          return window.ethereum.request({\r\n            method: \"wallet_addEthereumChain\",\r\n            params: networkData,\r\n          });\r\n      }\r\n\r\n      async function init() {  \r\n\r\n        if (typeof window.ethereum !== 'undefined') {\r\n                const accounts = await window.ethereum.request({method: 'eth_requestAccounts'});\r\n                let accountConnection = accounts[0];\r\n                let subint = accountConnection.substr(0,4);\r\n                let subfinal = accountConnection.substr(-4,4);\r\n                document.querySelector('#intro').innerHTML ='conectado con la cuenta: ' + subint + '...' + subfinal;\r\n        } else {\r\n          Swal.fire({\r\n            title: \"No tiene metamask instalado\",\r\n            text: \"Cambie de navegador o puede instalárselo apretando al botón\",\r\n            showCancelButton: true,\r\n            confirmButtonText: \"Instalar\",\r\n            imageUrl: './img/metamask-transparent.png',\r\n            imageAlt: \"Instalar metamask\",\r\n          }).then((result) => {\r\n            /* Read more about isConfirmed, isDenied below */\r\n            if (result.isConfirmed) {\r\n              window.open('https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn', '_blank', 'rel=\"noreferrer\"');  \r\n            }});\r\n        } \r\n      \r\n      }\r\n\r\n        // funcion que detecta los cambios de cuenta\r\n        async function changeAccounts() {\r\n              \r\n          if (typeof window.ethereum !== 'undefined') {\r\n\r\n            window.ethereum.on(\"accountsChanged\", async function () {\r\n\r\n              await init();\r\n              \r\n            });\r\n\r\n          }\r\n        }\r\n\r\n        function faucet() {\r\n          window.open('https://testnet.binance.org/faucet-smart', '_blank', 'rel=\"noreferrer\"');  \r\n        }\r\n    \r\n    return (\r\n        <div className=\"App\">       \r\n        <div className=\"b-example-divider\"></div>\r\n        <div className=\"bg-dark container col-xl-10 col-xxl-8 px-4 py-5\">\r\n          <div className=\"row align-items-center g-lg-5 py-5\">\r\n            <h1  className=\"display-4 fw-bold lh-1 mb-3 text-white\">Canal de pago para red Ethereum o similares</h1>\r\n        </div>\r\n          </div>\r\n          <div className=\"bg-dark container col-xl-10 col-xxl-8 px-4 py-5\">\r\n            <div className=\"row align-items-center g-lg-5 py-5\">\r\n              <div className=\"col-lg-7 text-center text-lg-start\">\r\n              <h1  className=\"display-4 fw-bold lh-1 mb-3 text-white\">¿Qué es un canal de pago?</h1>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">Un canal de pago, en inglés: <i>Payment Channel</i>, es una vía para realizar numerosas transacciones de una criptomoneda con el mínimo coste. </p>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">La gran mayoría de las criptomonedas de segunda generación disponen de una gran limitación a la hora de realizar numerosas transacciones. No solo en tanto a la escalabilidad por segundo que pueda disponer la blockchain, sino por <strong>las altas comisiones existentes</strong> por cada transacción. Especialmente dolorosas son en la red Ethereum, que, a Septiembre del 2021, siguen siendo inasumibles para el envio de micropagos o para realizar un canal constante de los mismos, como por ejemplo, el envío mensual de nóminas a un número indeterminado de trabajadores.</p>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">Con un canal de pago se pueden realizar  tantas transacciones como se desee en <strong>segundo plano</strong>, reduciendo así las transacciones reales en la  blockchain principal <strong>a únicamente dos</strong>. Volviendo al ejemplo de pago de una nómina, el pagador puede ingresar un dinero total y realizar <strong>tantos cheques a cobrar como empleados disponga</strong>. Una única transacción para ingresar, y una única transacción por empleado a cobrar.</p>\r\n                <p  className=\"col-lg-10 fs-4 text-white\"> <strong>Atención, </strong>Nuevo contrato deployado. Si usted metió dinero en el anterior contrato no lo podrá utilizar. Por suerte son tokens de testnet.</p>\r\n              </div>\r\n              <div className=\"col-md-10 mx-auto col-lg-5\">\r\n               <img src=\"./img/dibujo.png\" width=\"300\" alt=\"dibujo de canal de pago\"/>   \r\n              <div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n          <div className=\"bg-dark container col-xl-10 col-xxl-8 px-4 py-5\">\r\n            <div className=\"row align-items-center g-lg-5 py-5\">\r\n              <div className=\"col-lg-7 text-center text-lg-start\">\r\n                <h2  className=\"display-4 fw-bold lh-1 mb-3 text-white\">Usaremos la red Binance Smart Chain</h2>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">Lo primero, deme su permiso para conectarme a su Metamask. La conexión automática de su metamask por parte de una DAPP es una mala práctica. Téngalo en cuenta a la hora de crear la suya. </p>\r\n                <p  className=\"col-lg-10 fs-4 text-white\"> Si usted <strong>no dispone</strong> de la red de pruebas de BSC, se instalará apretando <strong>el botón naranja</strong>. Si ya la dispone, cambiará a esa red automáticamente.</p>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">Si no tenía la Red, tampoco tendra BNBs de prueba para hacer el tutorial. Apretando al boton azul usted podrá reclamar un BNB para poder crear un cheque.</p>\r\n              </div>\r\n              <div className=\"col-md-10 mx-auto col-lg-5\">\r\n                  <button id=\"btn-firma\"  onClick={() => init()} className=\"w-100 btn btn-lg btn-danger mb-4\" type=\"button\">Conectar Metamask</button>\r\n                    <button id=\"bnbNetwork\"  onClick={() => addNetwork()} className=\"w-100 btn btn-lg btn-warning mb-4\" type=\"button\">Añadir Red Binance Smart Chain de pruebas</button>\r\n\r\n                    <button id=\"faucet\"  onClick={() => faucet()} className=\"w-100 btn btn-lg btn-primary\" type=\"button\">Faucet de Binance</button>\r\n                    <hr className=\"my-4\"/>\r\n                    <form className=\"p-4 p-md-5 border rounded-3 bg-light\">\r\n                    <div className=\"form-floating mb-3\">\r\n                    </div>\r\n                    <hr className=\"my-4\"/>\r\n                    <small id=\"intro\" className=\"text-muted\">No conectado</small>\r\n                    </form>\r\n              <div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Intro;","import { useEffect, useState } from 'react';\r\nimport React  from 'react';\r\nimport { ethers } from 'ethers';\r\nimport ReceiverPays from './artifacts/contracts/ReceiverPays.sol/ReceiverPays.json';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst InsertMoney = () => {\r\n\r\n    const [amount, setAmount] = useState('0.1');\r\n    const [balance, setBalance] = useState('');\r\n    const payContract = \"0x65D56f700BF136b32162Ea82dAa55516d688B1c6\";\r\n    const [network, setNetwork] = useState('no-net');\r\n    const BINANCENETWORK = 'bnbt';\r\n    const [doubleCheck, setDoubleChek] = useState(0);\r\n\r\n    async function takeNetwork() {\r\n      console.log('dentro de takeNetwork')\r\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n      const network = await provider.getNetwork();\r\n      console.log('network', network.name);\r\n      setNetwork(network.name);\r\n    }\r\n\r\n    async function moreMoney() {\r\n\r\n      if (typeof window.ethereum !== 'undefined') {\r\n\r\n          if(network == BINANCENETWORK || doubleCheck == 1) {\r\n          const [account] = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n          const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n          const signer = provider.getSigner();\r\n          const contract = new ethers.Contract(payContract, ReceiverPays.abi, signer);\r\n          let bnbAmount = ethers.utils.parseEther(amount).toString();\r\n          try {\r\n            const tx = await contract.moreMoney({value: bnbAmount});\r\n            Swal.fire({\r\n              title: 'Procesando el ingreso',\r\n              text: 'Espere, y no actualice la página',\r\n              // icon: 'info',\r\n              showConfirmButton: false,\r\n              imageUrl: \"./img/processing.gif\",\r\n              imageWidth: 100,\r\n              imageHeight: 100,\r\n              imageAlt: 'Procesando el ingreso',\r\n  \r\n            });\r\n            const Ok = await tx.wait();\r\n            if(Ok) {\r\n              Swal.fire({\r\n              title:  `Se ha enviado ${amount} BNB al contrato ${payContract}`,\r\n              html: `<a href=\"https://testnet.bscscan.com/tx/${tx.hash}\" target=\"_blank\" rel=\"noreferrer\">Hash de la transacción</a>`,\r\n              icon: 'success',\r\n              confirmButtonText: 'Cerrar'\r\n            })};\r\n    \r\n            getBalanceUser();\r\n          } catch (err) {\r\n            let mensajeError = err.message;\r\n        \r\n            Swal.fire({\r\n              title: 'Ooops!',\r\n              text: `${mensajeError}`,\r\n              icon: 'error',\r\n              confirmButtonText: 'Cerrar'\r\n            })\r\n            console.log(\"Error: \", err)\r\n              }\r\n           } else {\r\n            setDoubleChek(1); // prevents double click in same function\r\n            isInNetwork();\r\n           }\r\n          }\r\n    }\r\n\r\n        async function isInNetwork() {\r\n        console.log('en isInNetwork');       \r\n          if(network !== 'no-net' || network === BINANCENETWORK) {\r\n            Swal.fire({\r\n                title: 'red',\r\n                //text: `Cambia a BSC si la tienes o sigue el siguiente tutorial para configurarla`,\r\n                text: 'Estás en la red '+network+', has de cambiar a la red '+BINANCENETWORK,\r\n                confirmButtonText: 'Cambiar o instalar red BNB de pruebas',\r\n                //imageUrl: 'https://i2.wp.com/criptotendencia.com/wp-content/uploads/2020/04/binance-smart-chain.jpg?fit=1200%2C674&ssl=1',\r\n                imageUrl: \"./img/processing.gif\",\r\n                imageWidth: 300,\r\n                \r\n                imageAlt: 'Red Binance Smart Chain',\r\n              }).then((result) => {\r\n                /* Read more about isConfirmed, isDenied below */\r\n                if (result.isConfirmed) {\r\n                  addNetwork();\r\n                  //window.open('https://academy.binance.com/es/articles/connecting-metamask-to-binance-smart-chain', '_blank');  \r\n                }\r\n              }); \r\n          } else {\r\n            moreMoney();\r\n          }\r\n        }\r\n\r\n      useEffect(function () {\r\n        takeNetwork();\r\n        changeAccounts();\r\n   \r\n      },[network]);\r\n\r\n      async function getBalanceUser() {\r\n\r\n            const [account] = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n            const signer = provider.getSigner();\r\n            const contract = new ethers.Contract(payContract, ReceiverPays.abi, signer);\r\n\r\n            try {\r\n              const contractUserBalance = await contract.recipientBalance(account);\r\n              let amount = ethers.utils.formatEther(contractUserBalance).toString();\r\n              let bnbAmount = Number.parseFloat(amount).toFixed(2);\r\n              setBalance(`Dispone de ${bnbAmount} BNB ingresados`);\r\n            } catch (err) {\r\n              let mensajeError = err.message;\r\n              Swal.fire({\r\n                title: 'Ooops!',\r\n                text: `${mensajeError}`,\r\n                icon: 'error',\r\n                confirmButtonText: 'Cerrar'\r\n              })\r\n              console.log(\"Error: \", err)\r\n            }\r\n\r\n      }\r\n\r\n        // funcion que detecta los cambios de cuenta\r\n        async function changeAccounts() {\r\n              \r\n          if (typeof window.ethereum !== 'undefined') {\r\n\r\n            window.ethereum.on(\"accountsChanged\", async function () {\r\n\r\n              await getBalanceUser();\r\n              \r\n            });\r\n\r\n          }\r\n        }\r\n\r\n        async function addNetwork() {\r\n\r\n          let networkData = [{\r\n                  chainId: \"0x61\",\r\n                  chainName: \"BSCTESTNET\",\r\n                  rpcUrls: [\"https://data-seed-prebsc-2-s3.binance.org:8545\"],\r\n                  nativeCurrency: {\r\n                    name: \"BINANCE COIN\",\r\n                    symbol: \"BNB\",\r\n                    decimals: 18,\r\n                  },\r\n                  blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\r\n                },\r\n              ];\r\n      \r\n          // agregar red o cambiar red\r\n          return window.ethereum.request({\r\n            method: \"wallet_addEthereumChain\",\r\n            params: networkData,\r\n            \r\n          }).then(takeNetwork())\r\n          \r\n        }\r\n\r\n\r\n    \r\n    return (\r\n        <div className=\"App\">       \r\n        <div className=\"b-example-divider\"></div>\r\n          <div className=\"bg-dark container col-xl-10 col-xxl-8 px-4 py-5\">\r\n            <div className=\"row align-items-center g-lg-5 py-5\">\r\n              <div className=\"col-lg-7 text-center text-lg-start\">\r\n                <h2  className=\"display-4 fw-bold lh-1 mb-3 text-white\">Ingresar BNB al contrato</h2>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">El contrato está preparado para recibir BNBs de cualquier cuenta.</p>  \r\n                <p  className=\"col-lg-10 fs-4 text-white\">Se controla que nadie pueda gastar más de lo que ingrese. Por defecto la cantidad es 0.1 BNB pero puede colocar la cantidad que desee.</p>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">Si no ve su saldo ingresado en el contrato apriete el botón verde.</p> \r\n                <p  className=\"col-lg-10 fs-4 text-white\">Si usted realiza un cheque de 1 BNB y tiene en el contrato solo 0.5 ingresados <strong>el cheque no se cobrará ni se anulará</strong>. Puede ingresar posteriormente los 0.5 BNB faltantes para que el cobrador pueda ejecutar su cheque. </p>\r\n\r\n              </div>\r\n              <div className=\"col-md-10 mx-auto col-lg-5\">\r\n                <form className=\"p-4 p-md-5 border rounded-3 bg-light\">\r\n                    <div className=\"form-floating mb-3\">\r\n                      <input value={amount} onChange={e => setAmount(e.target.value.replace(',', '.'))} type=\"text\" className=\"form-control\" id=\"amountToSend\"/>\r\n                      <label htmlFor=\"amountToSend\">BNBs a ingresar</label>\r\n                    </div>\r\n                    <button id=\"btn-deposit\"  onClick={() => moreMoney()} className=\"w-100 btn btn-lg btn-primary\" type=\"button\">Ingresar</button>\r\n                    <hr className=\"my-4\"/>\r\n                    <button id=\"btn-balance\"  onClick={() => getBalanceUser()} className=\"btn-success w-100 btn btn-lg\" type=\"button\">Comprobar su balance</button>\r\n                    <hr className=\"my-4\"/>\r\n                    <small id=\"balance\" className=\"text-muted\">{balance}</small>\r\n                </form>\r\n              <div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default InsertMoney;","import { useState } from 'react';\r\nimport React  from 'react';\r\nimport { ethers } from 'ethers';\r\nimport ReceiverPays from './artifacts/contracts/ReceiverPays.sol/ReceiverPays.json';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst PayCheck = () => {\r\n\r\n    const [amount, setAmount] = useState('0.1');\r\n    const [nonce, setNonce] = useState(0);\r\n    const [payer, setPayer] = useState('');\r\n    const [signedHash, setSignedHash] = useState('');\r\n    const payContract = \"0x65D56f700BF136b32162Ea82dAa55516d688B1c6\";\r\n\r\n    async function payCheck() {\r\n\r\n      if (typeof window.ethereum !== 'undefined') {\r\n\r\n          const [account] = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n          const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n          const signer = provider.getSigner();\r\n          const contract = new ethers.Contract(payContract, ReceiverPays.abi, signer);\r\n          let bnbAmount = ethers.utils.parseEther(amount).toString();\r\n\r\n\r\n          try {\r\n\r\n            const tx = await contract.claimPayment(payer, bnbAmount, nonce, signedHash, {from: account});\r\n            Swal.fire({\r\n              title: 'Procesando el pago del cheque',\r\n              text: 'Espere. No actualice la página',\r\n              // icon: 'info',\r\n              showConfirmButton: false,\r\n              imageUrl: \"./img/processing.gif\",\r\n              imageWidth: 100,\r\n              imageHeight: 100,\r\n              imageAlt: 'Procesando el ingreso',\r\n  \r\n            });\r\n            const Ok = await tx.wait();\r\n            if(tx) {\r\n              Swal.fire({\r\n              title:  `Se ha envíado ${amount} BNB a la cuenta ${account}`,\r\n              html: `<a href=\"https://testnet.bscscan.com/tx/${tx.hash}\" target=\"_blank\" rel=\"noreferrer\">Hash de la transacción</a>`,\r\n              icon: 'success',\r\n              confirmButtonText: 'Cerrar'\r\n            })};\r\n            console.log('transaction ', tx);\r\n          } catch (err) {\r\n            let mensajeError = err.message;\r\n             \r\n            if (err.data) {\r\n  \r\n              if (err.data.message === 'execution reverted: Este cheque ya se ha pagado') {\r\n                mensajeError =  'Este cheque ya se ha pagado';\r\n              } else if(err.data.message === 'execution reverted: El pagador no dispone del dinero suficiente para pagarle. Reclame su ingreso'){\r\n                mensajeError =  'El pagador no dispone del dinero suficiente para pagarle. Reclame su ingreso';\r\n              } else {\r\n                console.log('error: ',mensajeError);\r\n              }\r\n            }\r\n        \r\n            Swal.fire({\r\n              title: 'Ooops!',\r\n              text: `${mensajeError}`,\r\n              icon: 'error',\r\n              confirmButtonText: 'Cerrar'\r\n            })\r\n            console.log(\"Error: \", err)\r\n          }\r\n      }\r\n    }\r\n\r\n    \r\n    return (\r\n        <div className=\"App\">       \r\n        <div className=\"b-example-divider\"></div>\r\n          <div className=\"bg-dark container col-xl-10 col-xxl-8 px-4 py-5\">\r\n            <div className=\"row align-items-center g-lg-5 py-5\">\r\n              <div className=\"col-lg-7 text-center text-lg-start\">\r\n                <h2  className=\"display-4 fw-bold lh-1 mb-3 text-white\">Cobrar Cheque</h2>\r\n                <p  className=\"col-lg-10 fs-4 text-white\">Introduzca los datos requeridos para hacer efectivo su cheque. Recuerde estar usando la cuenta acreedora del cheque en su Metamask para poder cobrarlo. Cuidado al copiar con los espacios.</p>\r\n              </div>\r\n              <div className=\"col-md-10 mx-auto col-lg-5\">\r\n                <form className=\"p-4 p-md-5 border rounded-3 bg-light\">\r\n                  <div className=\"form-floating mb-3\">\r\n                    <input value={nonce} onChange={e => setNonce(e.target.value)} type=\"number\" className=\"form-control\" id=\"serie2\"/>\r\n                    <label htmlFor=\"serie2\">Serie del cheque</label>\r\n                  </div>\r\n                    <div className=\"form-floating mb-3\">\r\n                      <input value={amount} onChange={e => setAmount(e.target.value.replace(',', '.'))} type=\"text\" className=\"form-control\" id=\"amountToPay2\"/>\r\n                      <label htmlFor=\"amountToPay2\">BNBs a cobrar</label>\r\n                    </div>\r\n                    <div className=\"form-floating mb-3\">\r\n                      <input value={signedHash} onChange={e => setSignedHash(e.target.value)} type=\"text\" className=\"form-control\" id=\"signedHash\"/>\r\n                      <label htmlFor=\"signedHash\">Hash firmado</label>\r\n                    </div>\r\n                    <div className=\"form-floating mb-3 d-inline-flex\">\r\n                      <input value={payer} onChange={e => setPayer(e.target.value)} type=\"text\" className=\"form-control\" id=\"payer\"/>\r\n                      <label htmlFor=\"payer\">Pagador</label>\r\n                      <button type=\"button\" className=\"btn btn-secondary mx-3\" data-bs-toggle=\"modal\" data-bs-target=\"#pagadorModal\">\r\n                  <i className=\"fa fa-info\"></i>\r\n                  </button>\r\n                    </div>\r\n                    <button id=\"btn-receive\"  onClick={() => payCheck()} className=\"w-100 btn btn-lg btn-primary\" type=\"button\">Cobrar</button>\r\n\r\n                    <hr className=\"my-4\"/>\r\n                </form>\r\n              <div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Modal de informacion */}\r\n      <div className=\"modal fade\" id=\"pagadorModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" aria-labelledby=\"pagadorModalLabel\" aria-hidden=\"true\">\r\n  <div className=\"modal-dialog\">\r\n    <div className=\"modal-content\">\r\n      <div className=\"modal-header\">\r\n        <h5 className=\"modal-title\" id=\"pagadorModalLabel\">Registro del pagador</h5>\r\n        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div className=\"modal-body\">\r\n   Ya que ésta DAPP tiene una intención divulgativa, el contrato de pago tiene que estar disponible para diversos pagadores. Para poder realizar esa función es necesario que a la hora del cobro el acreedor determine quien es el que le debe el dinero. Éste usuario además habrá tenido que ingresar la cantidad prometida porque la seguridad del contrato <strong>rechazará todo pago de un pagador que no haya ingresado el dinero demandado</strong>. <br/><br/>\r\n    \r\n Los cheques que no se hayan podido cobrar por falta de fondos <strong>no se anulan</strong>. Es decir, si el pagador ingresa el dinero posteriormente a la reclamación del acreedor se podrá ejecutar el cobro sin problemas.  <br/><br/>\r\n \r\n Para eliminar la desconfianza entre las partes, propio de la naturaleza de todo contrato inteligente, se podría añadir una claúsula más para que no pudiese realizar cheques quien no disponga del dinero ingresado en el contrato pagador de antemano. Pero he considerado que ya he complicado bastante los contratos para quien desee estudiarlos, y por tanto, he decidido no implementar ésta importante claúsula para no complicar más los contratos de la DAAP. \r\n    </div>\r\n      <div className=\"modal-footer\">\r\n        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n      {/* fin de modal de informacion */}\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PayCheck;","import './App.css';\r\nimport { useState } from 'react';\r\nimport Swal from 'sweetalert2';\r\nimport Signature from './artifacts/contracts/Signature.sol/Signature.json';\r\nimport Intro from './Intro';\r\nimport InsertMoney from './InsertMoney';\r\nimport PayCheck from './PayCheck';\r\nimport { ethers } from 'ethers';\r\nimport useClippy from 'use-clippy';\r\n\r\nfunction App() {\r\n\r\n  const [recipient, setRecipient] = useState('');\r\n  const [nonce, setNonce] = useState(Math.floor(new Date().getTime()/1000.0));\r\n  const [amount, setAmount] = useState('0.1');\r\n  const [user, setUser] = useState('');// 0x00e55244c13FfA6D6313718459D82536F43F6dcf\r\n  const [contractAddress, setContractAddress] = useState(\"0x65D56f700BF136b32162Ea82dAa55516d688B1c6\"); // contrato de cobro.\r\n  const signatureAddress = \"0x854F2CBa80dAe7989Dd5729Ed2a71A1923d43243\";\r\n  const [signedHash, setSignedHash] = useState('');\r\n  const [clipboard, setClipboard] = useClippy();\r\n  const [condition, setCondition] = useState(true);   \r\n\r\n            async function signPayment() {\r\n              if (typeof window.ethereum !== 'undefined') {\r\n                  const [account] = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n                  const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n                  const signer = provider.getSigner();\r\n                  const contract = new ethers.Contract(signatureAddress, Signature.abi, signer);\r\n                  let bnbAmount = ethers.utils.parseEther(amount).toString();\r\n\r\n                  try {\r\n                    const hash = await contract.getMessageHash(recipient, bnbAmount, nonce, contractAddress);\r\n                     let sig = await window.ethereum.request({method:\"personal_sign\", params: [account, hash]});\r\n                      Swal.fire({\r\n                        title: 'Copie los datos para enviar al cobrador',\r\n                        text: `Numero de serie: ${nonce} Importe: ${amount} Pagador: ${account} Hash firmado: ${sig}`,\r\n                        showDenyButton: true,\r\n                        showCancelButton: true,\r\n                        confirmButtonText: `Copiar al portapapeles`,\r\n                        denyButtonText: `Solo quería ver como era`,\r\n                      }).then((result) => {\r\n                        /* Read more about isConfirmed, isDenied below */\r\n                        if (result.isConfirmed) {\r\n                          setClipboard(`Numero de serie: ${nonce} Importe: ${amount} Pagador: ${account} Hash firmado: ${sig}`);\r\n                          Swal.fire('Datos Copiados a su portapapeles', '', 'success')\r\n                        } else if (result.isDenied) {\r\n                          Swal.fire('El formulario conserva los datos si aún desea recuperarlos. En la consola de Javascript podrá encontrar el hash firmado.', '', 'info')\r\n                        }\r\n                      })\r\n                      console.log('hash firmado: ', sig);\r\n                      setSignedHash(sig);\r\n                      setUser(account);\r\n\r\n                  } catch (err) {\r\n                    let mensajeError = err.message;\r\n                    Swal.fire({\r\n                      title: 'Ooops!',\r\n                      text: `${mensajeError}`,\r\n                      icon: 'error',\r\n                      confirmButtonText: 'Cerrar'\r\n                    })\r\n                    console.log(\"Error: \", err)\r\n                  }\r\n              }\r\n            }\r\n\r\n    return ( \r\n\r\n  <div className=\"App\">\r\n    <Intro/>   \r\n      <InsertMoney/>\r\n      <div className=\"bg-dark container col-xl-10 col-xxl-8 px-4 py-5\">\r\n        <div className=\"row justify-content-md-center\">\r\n        <h3 className=\"text-white text-center col-lg-4\">¿Qué desea hacer?</h3>\r\n        <button className=\"btn btn-lg btn-primary col-lg-4\" onClick={() => setCondition(!condition)}> Crear Cheque / Cobrar Cheque </button>\r\n        </div>\r\n      </div>\r\n    <div className={condition ? '' : 'd-none'}>       \r\n      <div className=\"b-example-divider\"></div>\r\n        <div className=\"bg-dark container col-xl-10 col-xxl-8 px-4 py-5\">\r\n          <div className=\"row align-items-center g-lg-5 py-5\">\r\n            <div className=\"col-lg-7 text-center text-lg-start\">\r\n              <h2  className=\"display-4 fw-bold lh-1 mb-3 text-white\">Crear Cheque</h2>\r\n              <p  className=\"col-lg-10 fs-4 text-white\">Introduzca los datos del beneficiario y cantidad a abonar para que puedan ser firmados con la cuenta que tenga conectada.</p>\r\n              <p  className=\"col-lg-10 fs-4 text-white\">Después de que usted firme el Hash recibirá otro con su firma incluída. Junto a el le aparecerán los datos que tendría que mandar al cobrador del mismo. Tenga a mano el bloc de notas para copiarlos.</p>\r\n              <p  className=\"col-lg-10 fs-4 text-white\">Añada otra cuenta de su billetera como cobrador si usted quiere realizar también el cobro del cheque.</p> \r\n               <p  className=\"col-lg-10 fs-4 text-white\">El hash se puede firmar fuera de la red como verá en otros tutoriales. Sin embargo, yo utilizo otro contrato en la testnet. Si también desea verlo <a href=\"https://testnet.bscscan.com/address/0x854F2CBa80dAe7989Dd5729Ed2a71A1923d43243#code \" target=\"_blank\" rel=\"noreferrer\">aquí</a> lo tiene. </p>\r\n            </div>\r\n            <div className=\"col-md-10 mx-auto col-lg-5\">\r\n              <form className=\"p-4 p-md-5 border rounded-3 bg-light\">\r\n                <div className=\"form-floating mb-3 d-inline-flex\">\r\n                  <input value={contractAddress} onChange={e => setContractAddress(e.target.value)} type=\"text\" className=\"form-control\" id=\"contractAddress\" disabled/> \r\n                  <button type=\"button\" className=\"btn btn-secondary mx-3\" data-bs-toggle=\"modal\" data-bs-target=\"#contratoModal\">\r\n                  <i className=\"fa fa-info\"></i>\r\n                  </button>\r\n                  <label htmlFor=\"contractAddress\">Contrato de cobro</label>   \r\n                </div>\r\n                <div className=\"form-floating mb-3\">\r\n                  <input value={recipient} onChange={e => setRecipient(e.target.value)} type=\"text\" className=\"form-control\" id=\"recipient\"/>\r\n                  <label htmlFor=\"recipient\">Beneficiario</label>\r\n                </div>\r\n                <div className=\"form-floating mb-3 d-inline-flex\">\r\n                  <input value={nonce} onChange={e => setNonce(e.target.value)} type=\"number\" className=\"form-control\" id=\"serie\"/>\r\n                  <label htmlFor=\"serie\">Serie del cheque</label>\r\n                  <button type=\"button\" className=\"btn btn-secondary mx-3\" data-bs-toggle=\"modal\" data-bs-target=\"#serieModal\">\r\n                  <i className=\"fa fa-info\"></i>\r\n                  </button>\r\n                </div>\r\n                  <div className=\"form-floating mb-3\">\r\n                    <input value={amount} onChange={e => setAmount(e.target.value.replace(',', '.'))} type=\"text\" className=\"form-control\" id=\"amountToPay\"/>\r\n                    <label htmlFor=\"amountToPay\">BNBs a cobrar</label>\r\n                  </div>\r\n                  <button id=\"btn-firma\"  onClick={() => signPayment()} className=\"w-100 btn btn-lg btn-primary\" type=\"button\">Firmar</button>\r\n                  <hr className=\"my-4\"/>\r\n              </form>\r\n            <div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div className={condition ? 'd-none' : ''}>  \r\n    <PayCheck/>\r\n  </div>\r\n\r\n  {/* Modals de informacion*/}\r\n\r\n<div className=\"modal fade\" id=\"contratoModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" aria-labelledby=\"contratoModalLabel\" aria-hidden=\"true\">\r\n  <div className=\"modal-dialog\">\r\n    <div className=\"modal-content\">\r\n      <div className=\"modal-header\">\r\n        <h5 className=\"modal-title\" id=\"contratoModalLabel\">Contrato de pago en Hash</h5>\r\n        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div className=\"modal-body\">\r\n      Existe un ataque que puede producirse de la forma siguiente:\r\n      <br/><br/>\r\n      Usted realiza algunos pagos con un contrato y luego decide destruirlo. Más tarde, implementa un nuevo contrato inteligente, con el mismo código, para realizar otros pagos. \r\n      Éste nuevo contrato desconoce las series de los cheques que se han pagado en la implementación anterior, por lo que el usuario puede volver a usar los mismos datos con el hash firmado para realizar un doble cobro. \r\n      Nos podemos proteger contra esto al incluir la dirección del contrato en el mensaje, y por tanto, solo se aceptarán los cheques firmados que correspondan con el contrato implementado para ellos.\r\n      </div>\r\n      <div className=\"modal-footer\">\r\n        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div className=\"modal fade\" id=\"serieModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\"  aria-labelledby=\"serieModalLabel\" aria-hidden=\"true\">\r\n  <div className=\"modal-dialog\">\r\n    <div className=\"modal-content\">\r\n      <div className=\"modal-header\">\r\n        <h5 className=\"modal-title\" id=\"serieModalLabel\">Serie de los cheques</h5>\r\n        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div className=\"modal-body\">\r\n    Nosotros creamos un número de serie único con un <i>stamp time</i> cuando cargamos la página. \r\n    Pero usted puede crear todos los cheques que desee con cualquier otra numeración. \r\n    Sin embargo, tenga en cuenta que si usted firma un cheque con un número de serie que ya se ha utilizado para abonar otro cheque por parte de otro usuario <strong>el suyo no podrá ser abonado</strong>.<br/><br/>\r\n    \r\n    Puede comprobar si un número de serie se ha utilizado desde las funciones <i>getters</i> que tenemos en el contrato. <br/><br/>\r\n    Para saber si una serie ya se ha utilizado use la función: <i>usedNonces</i>, para saber quien lo ha cobrado con la función: <i>noncesRecipients</i>, y la cantidad que se ha abonado con la función: <i>noncesAmount</i>.\r\n    Aquí dispone del enlace para que haga esas comprobaciones si es su deseo:<br/><br/>\r\n    <a href=\"https://testnet.bscscan.com/address/0x00e55244c13FfA6D6313718459D82536F43F6dcf#readContract\" target=\"_blank\" rel=\"noreferrer\"><i>Read Functions</i></a>\r\n    </div>\r\n      <div className=\"modal-footer\">\r\n        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n{/* Fin de los modals */}\r\n\r\n\r\n  {/* Footer */}\r\n  <footer className=\"text-center text-white my-3 container\" style={{backgroundColor: \"#0a4275\"}}>\r\n\r\n    <div className=\"p-4 pb-0\">\r\n      <section className=\"\">\r\n      <a className=\"text-decoration-none\" href=\"https://github.com/Cainuriel/ERC-Contracts/tree/main/payment-channel\" target=\"_blank\" rel=\"noreferrer\"> <p className=\"d-flex justify-content-center align-items-center\">\r\n          <span className=\"me-3\">Código en Github </span>\r\n          <i className=\"fab fa-github\"></i>\r\n        </p></a> \r\n      </section>\r\n    </div>\r\n    <div className=\"text-center p-3 container\"  style={{backgroundColor: \"rgba(0, 0, 0, 0.2)\"}}>\r\n    2021 <a className=\"text-white text-decoration-none\" href=\"https://cainuriel.github.io/\"> <img src='./favicon.ico'/> \r\n       Developer Superloper</a>\r\n    </div>\r\n   \r\n  </footer>\r\n\r\n\r\n\r\n</div>\r\n\r\n  );\r\n  \r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}