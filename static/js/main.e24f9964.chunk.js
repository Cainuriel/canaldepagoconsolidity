(this["webpackJsonppayment-channel"]=this["webpackJsonppayment-channel"]||[]).push([[0],{23:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"ReceiverPays","sourceName":"contracts/ReceiverPays.sol","abi":[{"inputs":[],"stateMutability":"payable","type":"constructor"},{"inputs":[],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"payer","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"claimPayment","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"moreMoney","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"noncesAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"noncesRecipients","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"}],"name":"recipientBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"shutdown","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"usedNonces","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}],"bytecode":"0x6080604052600080546001600160a01b031916331790556106b7806100256000396000f3fe6080604052600436106100865760003560e01c80635d2a5617116100595780635d2a5617146102115780636717e41c14610219578063722713f7146102575780638da5cb5b1461026c578063fc0e74d11461028157610086565b80630b822dde1461008b5780631ff6f4b7146100d1578063410b9c051461011657806350036a3a146101e7575b600080fd5b34801561009757600080fd5b506100b5600480360360208110156100ae57600080fd5b5035610296565b604080516001600160a01b039092168252519081900360200190f35b3480156100dd57600080fd5b50610104600480360360208110156100f457600080fd5b50356001600160a01b03166102b1565b60408051918252519081900360200190f35b34801561012257600080fd5b506101e56004803603608081101561013957600080fd5b6001600160a01b03823516916020810135916040820135919081019060808101606082013564010000000081111561017057600080fd5b82018360208201111561018257600080fd5b803590602001918460018302840111640100000000831117156101a457600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506102cc945050505050565b005b3480156101f357600080fd5b506101046004803603602081101561020a57600080fd5b503561048c565b6101e561049e565b34801561022557600080fd5b506102436004803603602081101561023c57600080fd5b50356104b5565b604080519115158252519081900360200190f35b34801561026357600080fd5b506101046104ca565b34801561027857600080fd5b506100b56104ce565b34801561028d57600080fd5b506101e56104dd565b6002602052600090815260409020546001600160a01b031681565b6001600160a01b031660009081526004602052604090205490565b60008281526001602052604090205460ff1615610330576040805162461bcd60e51b815260206004820152601b60248201527f45737465206368657175652079612073652068612070616761646f0000000000604482015290519081900360640190fd5b6040805133606090811b60208084019190915260348301879052605483018690523090911b6074830152825160688184030181526088909201909252805191012060009061037d90610531565b9050846001600160a01b03166103938284610582565b6001600160a01b0316146103a657600080fd5b6001600160a01b0385166000908152600460205260409020548411156103fd5760405162461bcd60e51b815260040180806020018281038252604c815260200180610636604c913960600191505060405180910390fd5b6000838152600160208181526040808420805460ff19169093179092556001600160a01b0388168352600490528082208054879003905551339186156108fc02918791818181858888f1935050505015801561045d573d6000803e3d6000fd5b505050600090815260026020908152604080832080546001600160a01b03191633179055600390915290205550565b60036020526000908152604090205481565b336000908152600460205260409020805434019055565b60016020526000908152604090205460ff1681565b4790565b6000546001600160a01b031681565b6000546001600160a01b031633146104f457600080fd5b600080546040516001600160a01b03909116914780156108fc02929091818181858888f1935050505015801561052e573d6000803e3d6000fd5b50565b604080517f19457468657265756d205369676e6564204d6573736167653a0a333200000000602080830191909152603c8083019490945282518083039094018452605c909101909152815191012090565b60008060008061059185610606565b92509250925060018684848460405160008152602001604052604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa1580156105f1573d6000803e3d6000fd5b5050604051601f190151979650505050505050565b6000806000835160411461061957600080fd5b5050506020810151604082015160609092015160001a9290919056fe456c2070616761646f72206e6f20646973706f6e652064656c2064696e65726f20737566696369656e746520706172612070616761726c652e205265636c616d6520737520696e677265736fa2646970667358221220d7e7d3ea52a270be58d7cb79064948ac2bbe1d7a0dd0e21161d972a1a7461e4964736f6c63430007060033","deployedBytecode":"0x6080604052600436106100865760003560e01c80635d2a5617116100595780635d2a5617146102115780636717e41c14610219578063722713f7146102575780638da5cb5b1461026c578063fc0e74d11461028157610086565b80630b822dde1461008b5780631ff6f4b7146100d1578063410b9c051461011657806350036a3a146101e7575b600080fd5b34801561009757600080fd5b506100b5600480360360208110156100ae57600080fd5b5035610296565b604080516001600160a01b039092168252519081900360200190f35b3480156100dd57600080fd5b50610104600480360360208110156100f457600080fd5b50356001600160a01b03166102b1565b60408051918252519081900360200190f35b34801561012257600080fd5b506101e56004803603608081101561013957600080fd5b6001600160a01b03823516916020810135916040820135919081019060808101606082013564010000000081111561017057600080fd5b82018360208201111561018257600080fd5b803590602001918460018302840111640100000000831117156101a457600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506102cc945050505050565b005b3480156101f357600080fd5b506101046004803603602081101561020a57600080fd5b503561048c565b6101e561049e565b34801561022557600080fd5b506102436004803603602081101561023c57600080fd5b50356104b5565b604080519115158252519081900360200190f35b34801561026357600080fd5b506101046104ca565b34801561027857600080fd5b506100b56104ce565b34801561028d57600080fd5b506101e56104dd565b6002602052600090815260409020546001600160a01b031681565b6001600160a01b031660009081526004602052604090205490565b60008281526001602052604090205460ff1615610330576040805162461bcd60e51b815260206004820152601b60248201527f45737465206368657175652079612073652068612070616761646f0000000000604482015290519081900360640190fd5b6040805133606090811b60208084019190915260348301879052605483018690523090911b6074830152825160688184030181526088909201909252805191012060009061037d90610531565b9050846001600160a01b03166103938284610582565b6001600160a01b0316146103a657600080fd5b6001600160a01b0385166000908152600460205260409020548411156103fd5760405162461bcd60e51b815260040180806020018281038252604c815260200180610636604c913960600191505060405180910390fd5b6000838152600160208181526040808420805460ff19169093179092556001600160a01b0388168352600490528082208054879003905551339186156108fc02918791818181858888f1935050505015801561045d573d6000803e3d6000fd5b505050600090815260026020908152604080832080546001600160a01b03191633179055600390915290205550565b60036020526000908152604090205481565b336000908152600460205260409020805434019055565b60016020526000908152604090205460ff1681565b4790565b6000546001600160a01b031681565b6000546001600160a01b031633146104f457600080fd5b600080546040516001600160a01b03909116914780156108fc02929091818181858888f1935050505015801561052e573d6000803e3d6000fd5b50565b604080517f19457468657265756d205369676e6564204d6573736167653a0a333200000000602080830191909152603c8083019490945282518083039094018452605c909101909152815191012090565b60008060008061059185610606565b92509250925060018684848460405160008152602001604052604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa1580156105f1573d6000803e3d6000fd5b5050604051601f190151979650505050505050565b6000806000835160411461061957600080fd5b5050506020810151604082015160609092015160001a9290919056fe456c2070616761646f72206e6f20646973706f6e652064656c2064696e65726f20737566696369656e746520706172612070616761726c652e205265636c616d6520737520696e677265736fa2646970667358221220d7e7d3ea52a270be58d7cb79064948ac2bbe1d7a0dd0e21161d972a1a7461e4964736f6c63430007060033","linkReferences":{},"deployedLinkReferences":{}}')},39:function(e){e.exports=JSON.parse('{"_format":"hh-sol-artifact-1","contractName":"Signature","sourceName":"contracts/Signature.sol","abi":[{"inputs":[{"internalType":"bytes32","name":"_messageHash","type":"bytes32"}],"name":"getEthSignedMessageHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_nonce","type":"uint256"},{"internalType":"address","name":"_contract","type":"address"}],"name":"getMessageHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_ethSignedMessageHash","type":"bytes32"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"recoverSigner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"bytes","name":"sig","type":"bytes"}],"name":"splitSignature","outputs":[{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"},{"internalType":"uint8","name":"v","type":"uint8"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"_signer","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_nonce","type":"uint256"},{"internalType":"address","name":"_contract","type":"address"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"verify","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"pure","type":"function"}],"bytecode":"0x608060405234801561001057600080fd5b50610561806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c80636aa404521461005c57806397aba7f914610143578063a7bb58031461020c578063bfa4bf9a146102d3578063fa5408011461031f575b600080fd5b61012f600480360360c081101561007257600080fd5b6001600160a01b038235811692602081013582169260408201359260608301359260808101359091169181019060c0810160a08201356401000000008111156100ba57600080fd5b8201836020820111156100cc57600080fd5b803590602001918460018302840111640100000000831117156100ee57600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092955061033c945050505050565b604080519115158252519081900360200190f35b6101f06004803603604081101561015957600080fd5b8135919081019060408101602082013564010000000081111561017b57600080fd5b82018360208201111561018d57600080fd5b803590602001918460018302840111640100000000831117156101af57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550610385945050505050565b604080516001600160a01b039092168252519081900360200190f35b6102b26004803603602081101561022257600080fd5b81019060208101813564010000000081111561023d57600080fd5b82018360208201111561024f57600080fd5b8035906020019184600183028401116401000000008311171561027157600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550610409945050505050565b60408051938452602084019290925260ff1682820152519081900360600190f35b61030d600480360360808110156102e957600080fd5b506001600160a01b0381358116916020810135916040820135916060013516610482565b60408051918252519081900360200190f35b61030d6004803603602081101561033557600080fd5b50356104da565b60008061034b87878787610482565b90506000610358826104da565b9050886001600160a01b031661036e8286610385565b6001600160a01b0316149998505050505050505050565b60008060008061039485610409565b92509250925060018682858560405160008152602001604052604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa1580156103f4573d6000803e3d6000fd5b5050604051601f190151979650505050505050565b60008060008351604114610464576040805162461bcd60e51b815260206004820152601860248201527f696e76616c6964207369676e6174757265206c656e6774680000000000000000604482015290519081900360640190fd5b50505060208101516040820151606090920151909260009190911a90565b604080516bffffffffffffffffffffffff19606096871b8116602080840191909152603483019690965260548201949094529190941b9091166074820152825160688183030181526088909101909252815191012090565b604080517f19457468657265756d205369676e6564204d6573736167653a0a333200000000602080830191909152603c8083019490945282518083039094018452605c90910190915281519101209056fea2646970667358221220d69f3c15de97541d89dc6b780dcb0c31e3b3418964b70818c67f6655c03263ac64736f6c63430007060033","deployedBytecode":"0x608060405234801561001057600080fd5b50600436106100575760003560e01c80636aa404521461005c57806397aba7f914610143578063a7bb58031461020c578063bfa4bf9a146102d3578063fa5408011461031f575b600080fd5b61012f600480360360c081101561007257600080fd5b6001600160a01b038235811692602081013582169260408201359260608301359260808101359091169181019060c0810160a08201356401000000008111156100ba57600080fd5b8201836020820111156100cc57600080fd5b803590602001918460018302840111640100000000831117156100ee57600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092955061033c945050505050565b604080519115158252519081900360200190f35b6101f06004803603604081101561015957600080fd5b8135919081019060408101602082013564010000000081111561017b57600080fd5b82018360208201111561018d57600080fd5b803590602001918460018302840111640100000000831117156101af57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550610385945050505050565b604080516001600160a01b039092168252519081900360200190f35b6102b26004803603602081101561022257600080fd5b81019060208101813564010000000081111561023d57600080fd5b82018360208201111561024f57600080fd5b8035906020019184600183028401116401000000008311171561027157600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550610409945050505050565b60408051938452602084019290925260ff1682820152519081900360600190f35b61030d600480360360808110156102e957600080fd5b506001600160a01b0381358116916020810135916040820135916060013516610482565b60408051918252519081900360200190f35b61030d6004803603602081101561033557600080fd5b50356104da565b60008061034b87878787610482565b90506000610358826104da565b9050886001600160a01b031661036e8286610385565b6001600160a01b0316149998505050505050505050565b60008060008061039485610409565b92509250925060018682858560405160008152602001604052604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa1580156103f4573d6000803e3d6000fd5b5050604051601f190151979650505050505050565b60008060008351604114610464576040805162461bcd60e51b815260206004820152601860248201527f696e76616c6964207369676e6174757265206c656e6774680000000000000000604482015290519081900360640190fd5b50505060208101516040820151606090920151909260009190911a90565b604080516bffffffffffffffffffffffff19606096871b8116602080840191909152603483019690965260548201949094529190941b9091166074820152825160688183030181526088909101909252815191012090565b604080517f19457468657265756d205369676e6564204d6573736167653a0a333200000000602080830191909152603c8083019490945282518083039094018452605c90910190915281519101209056fea2646970667358221220d69f3c15de97541d89dc6b780dcb0c31e3b3418964b70818c67f6655c03263ac64736f6c63430007060033","linkReferences":{},"deployedLinkReferences":{}}')},51:function(e,a,t){},53:function(e,a,t){},65:function(e,a){},73:function(e,a){},76:function(e,a,t){"use strict";t.r(a);var n=t(7),s=t.n(n),r=t(38),c=t.n(r),o=(t(51),t(2)),i=t.n(o),d=t(14),l=t(8),b=(t(53),t(11)),u=t.n(b),f=t(39),m=t(3),p=function(){function e(){return(e=Object(d.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{chainId:"0x61",chainName:"BSCTESTNET",rpcUrls:["https://data-seed-prebsc-2-s3.binance.org:8545"],nativeCurrency:{name:"BINANCE COIN",symbol:"BNB",decimals:18},blockExplorerUrls:["https://testnet.bscscan.com/"]}],e.abrupt("return",window.ethereum.request({method:"wallet_addEthereumChain",params:a}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return t.apply(this,arguments)}function t(){return(t=Object(d.a)(i.a.mark((function e(){var a,t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=10;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:a=e.sent,t=a[0],n=t.substr(0,4),s=t.substr(-4,4),document.querySelector("#intro").innerHTML="conectado con la cuenta: "+n+"..."+s,e.next=11;break;case 10:u.a.fire({title:"No tiene metamask instalado",text:"Cambie de navegador o puede instal\xe1rselo apretando al bot\xf3n",showCancelButton:!0,confirmButtonText:"Instalar",imageUrl:"./img/metamask-transparent.png",imageAlt:"Instalar metamask"}).then((function(e){e.isConfirmed&&window.open("https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn","_blank")}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof window.ethereum&&window.ethereum.on("accountsChanged",Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{className:"b-example-divider"}),Object(m.jsx)("div",{className:"bg-dark container col-xl-10 col-xxl-8 px-4 py-5",children:Object(m.jsxs)("div",{className:"row align-items-center g-lg-5 py-5",children:[Object(m.jsxs)("div",{className:"col-lg-7 text-center text-lg-start",children:[Object(m.jsx)("h2",{className:"display-4 fw-bold lh-1 mb-3 text-white",children:"Usaremos la red Binance Smart Chain"}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"Lo primero, deme su permiso para conectarme a su Metamask. La conexi\xf3n autom\xe1tica de su metamask por parte de una DAPP es una mala pr\xe1ctica. T\xe9ngalo en cuenta a la hora de crear la suya. "}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:" Si usted no dispone de la red de pruebas de BSC, se instalar\xe1 apretando el bot\xf3n naranja. Si ya la dispone, cambiar\xe1 a esa red autom\xe1ticamente."}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"Si no ten\xeda la Red, tampoco tendra BNBs de prueba para hacer el tutorial. Apretando al boton azul usted podr\xe1 reclamar un BNB para poder crear un cheque."})]}),Object(m.jsxs)("div",{className:"col-md-10 mx-auto col-lg-5",children:[Object(m.jsx)("button",{id:"btn-firma",onClick:function(){return a()},className:"w-100 btn btn-lg btn-danger mb-4",type:"button",children:"Conectar Metamask"}),Object(m.jsx)("button",{id:"bnbNetwork",onClick:function(){return function(){return e.apply(this,arguments)}()},className:"w-100 btn btn-lg btn-warning mb-4",type:"button",children:"A\xf1adir Red Binance Smart Chain de pruebas"}),Object(m.jsx)("button",{id:"faucet",onClick:function(){window.open("https://testnet.binance.org/faucet-smart","_blank")},className:"w-100 btn btn-lg btn-primary",type:"button",children:"Faucet de Binance"}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsxs)("form",{className:"p-4 p-md-5 border rounded-3 bg-light",children:[Object(m.jsx)("div",{className:"form-floating mb-3"}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsx)("small",{id:"intro",className:"text-muted",children:"No conectado"})]}),Object(m.jsx)("div",{})]})]})})]})},h=t(12),j=t(23),x=function(){var e=Object(n.useState)("0.1"),a=Object(l.a)(e,2),t=a[0],s=a[1],r=Object(n.useState)(""),c=Object(l.a)(r,2),o=c[0],b=c[1],f="0x00e55244c13FfA6D6313718459D82536F43F6dcf";function p(){return(p=Object(d.a)(i.a.mark((function e(){var a,n,s,r,c,o,d,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=28;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return a=e.sent,n=Object(l.a)(a,1),n[0],s=new h.a.providers.Web3Provider(window.ethereum),r=s.getSigner(),c=new h.a.Contract(f,j.abi,r),o=h.a.utils.parseEther(t).toString(),e.prev=10,e.next=13,c.moreMoney({value:o});case 13:return d=e.sent,u.a.fire({title:"Procesando el ingreso",text:"Espere, y no actualice la p\xe1gina",showConfirmButton:!1,imageUrl:"https://thumbs.gfycat.com/ConventionalOblongFairybluebird-size_restricted.gif",imageWidth:100,imageHeight:100,imageAlt:"Procesando el ingreso"}),e.next=17,d.wait();case 17:e.sent&&u.a.fire({title:"Se ha enviado ".concat(t," BNB al contrato ").concat(f),html:'<a href="https://testnet.bscscan.com/tx/'.concat(d.hash,'" target="_blank">Hash de la transacci\xf3n</a>'),icon:"success",confirmButtonText:"Cerrar"}),x(),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(10),b=e.t0.message,u.a.fire({title:"Ooops!",text:"".concat(b),icon:"error",confirmButtonText:"Cerrar"}),console.log("Error: ",e.t0);case 28:case"end":return e.stop()}}),e,null,[[10,23]])})))).apply(this,arguments)}function x(){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(i.a.mark((function e(){var a,t,n,s,r,c,o,d,m,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return a=e.sent,t=Object(l.a)(a,1),n=t[0],s=new h.a.providers.Web3Provider(window.ethereum),r=s.getSigner(),c=new h.a.Contract(f,j.abi,r),e.prev=8,e.next=11,c.recipientBalance(n);case 11:o=e.sent,d=h.a.utils.formatEther(o).toString(),m=Number.parseFloat(d).toFixed(2),b("Dispone de ".concat(m," BNB ingresados")),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(8),p=e.t0.message,u.a.fire({title:"Ooops!",text:"".concat(p),icon:"error",confirmButtonText:"Cerrar"}),console.log("Error: ",e.t0);case 22:case"end":return e.stop()}}),e,null,[[8,17]])})))).apply(this,arguments)}function y(){return(y=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof window.ethereum&&window.ethereum.on("accountsChanged",Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]),Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{className:"b-example-divider"}),Object(m.jsx)("div",{className:"bg-dark container col-xl-10 col-xxl-8 px-4 py-5",children:Object(m.jsxs)("div",{className:"row align-items-center g-lg-5 py-5",children:[Object(m.jsxs)("div",{className:"col-lg-7 text-center text-lg-start",children:[Object(m.jsx)("h2",{className:"display-4 fw-bold lh-1 mb-3 text-white",children:"Ingresar BNB al contrato"}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"El contrato est\xe1 preparado para recibir BNBs de cualquier cuenta."}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"Se controla que nadie pueda gastar m\xe1s de lo que ingrese. Por defecto la cantidad es 0.1 BNB pero puede colocar la cantidad que desee."}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"Si no ve su saldo ingresado en el contrato apriete el bot\xf3n verde."}),Object(m.jsxs)("p",{className:"col-lg-10 fs-4 text-white",children:["Si usted realiza un cheque de 1 BNB y tiene en el contrato solo 0.5 ingresados ",Object(m.jsx)("strong",{children:"el cheque no se cobrar\xe1 ni se anular\xe1"}),". Puede ingresar posteriormente los 0.5 BNB faltantes para que el cobrador pueda ejecutar su cheque. "]})]}),Object(m.jsxs)("div",{className:"col-md-10 mx-auto col-lg-5",children:[Object(m.jsxs)("form",{className:"p-4 p-md-5 border rounded-3 bg-light",children:[Object(m.jsxs)("div",{className:"form-floating mb-3",children:[Object(m.jsx)("input",{value:t,onChange:function(e){return s(e.target.value.replace(",","."))},type:"text",className:"form-control",id:"amountToSend"}),Object(m.jsx)("label",{htmlFor:"amountToSend",children:"BNBs a ingresar"})]}),Object(m.jsx)("button",{id:"btn-deposit",onClick:function(){return function(){return p.apply(this,arguments)}()},className:"w-100 btn btn-lg btn-primary",type:"button",children:"Ingresar"}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsx)("button",{id:"btn-balance",onClick:function(){return x()},className:"btn-success w-100 btn btn-lg",type:"button",children:"Comprobar su balance"}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsx)("small",{id:"balance",className:"text-muted",children:o})]}),Object(m.jsx)("div",{})]})]})})]})},g=function(){var e=Object(n.useState)("0.1"),a=Object(l.a)(e,2),t=a[0],s=a[1],r=Object(n.useState)(0),c=Object(l.a)(r,2),o=c[0],b=c[1],f=Object(n.useState)(""),p=Object(l.a)(f,2),x=p[0],g=p[1],y=Object(n.useState)(""),O=Object(l.a)(y,2),N=O[0],v=O[1],w="0x00e55244c13FfA6D6313718459D82536F43F6dcf";function C(){return(C=Object(d.a)(i.a.mark((function e(){var a,n,s,r,c,d,b,f,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=29;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return a=e.sent,n=Object(l.a)(a,1),s=n[0],r=new h.a.providers.Web3Provider(window.ethereum),c=r.getSigner(),d=new h.a.Contract(w,j.abi,c),b=h.a.utils.parseEther(t).toString(),e.prev=10,e.next=13,d.claimPayment(x,b,o,N,{from:s});case 13:return f=e.sent,u.a.fire({title:"Procesando el pago del cheque",text:"Espere. No actualice la p\xe1gina",showConfirmButton:!1,imageUrl:"https://thumbs.gfycat.com/ConventionalOblongFairybluebird-size_restricted.gif",imageWidth:100,imageHeight:100,imageAlt:"Procesando el ingreso"}),e.next=17,f.wait();case 17:e.sent,f&&u.a.fire({title:"Se ha env\xedado ".concat(t," BNB a la cuenta ").concat(s),html:'<a href="https://testnet.bscscan.com/tx/'.concat(f.hash,'" target="_blank">Hash de la transacci\xf3n</a>'),icon:"success",confirmButtonText:"Cerrar"}),console.log("transaction ",f),e.next=29;break;case 23:e.prev=23,e.t0=e.catch(10),m=e.t0.message,e.t0.data&&("execution reverted: Este cheque ya se ha pagado"===e.t0.data.message?m="Este cheque ya se ha pagado":"execution reverted: El pagador no dispone del dinero suficiente para pagarle. Reclame su ingreso"===e.t0.data.message?m="El pagador no dispone del dinero suficiente para pagarle. Reclame su ingreso":console.log("error: ",m)),u.a.fire({title:"Ooops!",text:"".concat(m),icon:"error",confirmButtonText:"Cerrar"}),console.log("Error: ",e.t0);case 29:case"end":return e.stop()}}),e,null,[[10,23]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{className:"b-example-divider"}),Object(m.jsx)("div",{className:"bg-dark container col-xl-10 col-xxl-8 px-4 py-5",children:Object(m.jsxs)("div",{className:"row align-items-center g-lg-5 py-5",children:[Object(m.jsxs)("div",{className:"col-lg-7 text-center text-lg-start",children:[Object(m.jsx)("h2",{className:"display-4 fw-bold lh-1 mb-3 text-white",children:"Cobrar Cheque"}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"Introduzca los datos requeridos para hacer efectivo su cheque. Recuerde estar usando la cuenta acreedora del cheque en su Metamask para poder cobrarlo. Cuidado al copiar con los espacios."})]}),Object(m.jsxs)("div",{className:"col-md-10 mx-auto col-lg-5",children:[Object(m.jsxs)("form",{className:"p-4 p-md-5 border rounded-3 bg-light",children:[Object(m.jsxs)("div",{className:"form-floating mb-3",children:[Object(m.jsx)("input",{value:o,onChange:function(e){return b(e.target.value)},type:"number",className:"form-control",id:"serie2"}),Object(m.jsx)("label",{htmlFor:"serie2",children:"Serie del cheque"})]}),Object(m.jsxs)("div",{className:"form-floating mb-3",children:[Object(m.jsx)("input",{value:t,onChange:function(e){return s(e.target.value.replace(",","."))},type:"text",className:"form-control",id:"amountToPay2"}),Object(m.jsx)("label",{htmlFor:"amountToPay2",children:"BNBs a cobrar"})]}),Object(m.jsxs)("div",{className:"form-floating mb-3",children:[Object(m.jsx)("input",{value:N,onChange:function(e){return v(e.target.value)},type:"text",className:"form-control",id:"signedHash"}),Object(m.jsx)("label",{htmlFor:"signedHash",children:"Hash firmado"})]}),Object(m.jsxs)("div",{className:"form-floating mb-3 d-inline-flex",children:[Object(m.jsx)("input",{value:x,onChange:function(e){return g(e.target.value)},type:"text",className:"form-control",id:"payer"}),Object(m.jsx)("label",{htmlFor:"payer",children:"Pagador"}),Object(m.jsx)("button",{type:"button",className:"btn btn-secondary mx-3","data-bs-toggle":"modal","data-bs-target":"#pagadorModal",children:Object(m.jsx)("i",{className:"fa fa-info"})})]}),Object(m.jsx)("button",{id:"btn-receive",onClick:function(){return function(){return C.apply(this,arguments)}()},className:"w-100 btn btn-lg btn-primary",type:"button",children:"Cobrar"}),Object(m.jsx)("hr",{className:"my-4"})]}),Object(m.jsx)("div",{})]})]})}),Object(m.jsx)("div",{className:"modal fade",id:"pagadorModal","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"pagadorModalLabel","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",id:"pagadorModalLabel",children:"Registro del pagador"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsxs)("div",{className:"modal-body",children:["Ya que \xe9sta DAPP tiene una intenci\xf3n divulgativa, el contrato de pago tiene que estar disponible para diversos pagadores. Para poder realizar esa funci\xf3n es necesario que a la hora del cobro el acreedor determine quien es el que le debe el dinero. \xc9ste usuario adem\xe1s habr\xe1 tenido que ingresar la cantidad prometida porque la seguridad del contrato ",Object(m.jsx)("strong",{children:"rechazar\xe1 todo pago de un pagador que no haya ingresado el dinero demandado"}),". ",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),"Los cheques que no se hayan podido cobrar por falta de fondos ",Object(m.jsx)("strong",{children:"no se anulan"}),". Es decir, si el pagador ingresa el dinero posteriormente a la reclamaci\xf3n del acreedor se podr\xe1 ejecutar el cobro sin problemas.  ",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),"Para eliminar la desconfianza entre las partes, propio de la naturaleza de todo contrato inteligente, se podr\xeda a\xf1adir una cla\xfasula m\xe1s para que no pudiese realizar cheques quien no disponga del dinero ingresado en el contrato pagador de antemano. Pero he considerado que ya he complicado bastante los contratos para quien desee estudiarlos, y por tanto, he decidido no implementar \xe9sta importante cla\xfasula para no complicar m\xe1s los contratos de la DAAP."]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})},y=t(44),O=t.n(y);var N=function(){var e=Object(n.useState)(""),a=Object(l.a)(e,2),t=a[0],s=a[1],r=Object(n.useState)(Math.floor((new Date).getTime()/1e3)),c=Object(l.a)(r,2),o=c[0],b=c[1],j=Object(n.useState)("0.1"),y=Object(l.a)(j,2),N=y[0],v=y[1],w=Object(n.useState)(""),C=Object(l.a)(w,2),q=(C[0],C[1]),k=Object(n.useState)("0x00e55244c13FfA6D6313718459D82536F43F6dcf"),T=Object(l.a)(k,2),B=T[0],S=T[1],M="0x854F2CBa80dAe7989Dd5729Ed2a71A1923d43243",E=Object(n.useState)(""),F=Object(l.a)(E,2),P=(F[0],F[1]),A=O()(),_=Object(l.a)(A,2),D=(_[0],_[1]),z=Object(n.useState)(""),H=Object(l.a)(z,2),R=(H[0],H[1],Object(n.useState)(!0)),L=Object(l.a)(R,2),I=L[0],U=L[1];function J(){return(J=Object(d.a)(i.a.mark((function e(){var a,n,s,r,c,d,b,m,p,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=28;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return a=e.sent,n=Object(l.a)(a,1),s=n[0],r=new h.a.providers.Web3Provider(window.ethereum),c=r.getSigner(),d=new h.a.Contract(M,f.abi,c),b=h.a.utils.parseEther(N).toString(),e.prev=10,e.next=13,d.getMessageHash(t,b,o,B);case 13:return m=e.sent,e.next=16,window.ethereum.request({method:"personal_sign",params:[s,m]});case 16:p=e.sent,u.a.fire({title:"Copie los datos para enviar al cobrador",text:"Numero de serie: ".concat(o," Importe: ").concat(N," Pagador: ").concat(s," Hash firmado: ").concat(p),showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Copiar al portapapeles",denyButtonText:"Solo quer\xeda ver como era"}).then((function(e){e.isConfirmed?(D("Numero de serie: ".concat(o," Importe: ").concat(N," Pagador: ").concat(s," Hash firmado: ").concat(p)),u.a.fire("Datos Copiados a su portapapeles","","success")):e.isDenied&&u.a.fire("El formulario conserva los datos si a\xfan desea recuperarlos. En la consola de Javascript podr\xe1 encontrar el hash firmado.","","info")})),console.log("hash firmado: ",p),P(p),q(s),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(10),j=e.t0.message,u.a.fire({title:"Ooops!",text:"".concat(j),icon:"error",confirmButtonText:"Cerrar"}),console.log("Error: ",e.t0);case 28:case"end":return e.stop()}}),e,null,[[10,23]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("h1",{children:"Ejemplo de canal de pago en red Ethereum o similares"}),Object(m.jsx)(p,{}),Object(m.jsx)(x,{}),Object(m.jsx)("h3",{children:"\xbfQu\xe9 desea hacer?"}),Object(m.jsx)("button",{className:"btn-warning my-3",onClick:function(){return U(!I)},children:" Crear Cheque / Cobrar Cheque "}),Object(m.jsxs)("div",{className:I?"":"d-none",children:[Object(m.jsx)("div",{className:"b-example-divider"}),Object(m.jsx)("div",{className:"bg-dark container col-xl-10 col-xxl-8 px-4 py-5",children:Object(m.jsxs)("div",{className:"row align-items-center g-lg-5 py-5",children:[Object(m.jsxs)("div",{className:"col-lg-7 text-center text-lg-start",children:[Object(m.jsx)("h2",{className:"display-4 fw-bold lh-1 mb-3 text-white",children:"Crear Cheque"}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"Introduzca los datos del beneficiario y cantidad a abonar para que puedan ser firmados con la cuenta que tenga conectada."}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"Despu\xe9s de que usted firme el Hash recibir\xe1 otro con su firma inclu\xedda. Junto a el le aparecer\xe1n los datos que tendr\xeda que mandar al cobrador del mismo. Tenga a mano el bloc de notas para copiarlos."}),Object(m.jsx)("p",{className:"col-lg-10 fs-4 text-white",children:"A\xf1ada otra cuenta de su billetera como cobrador si usted quiere realizar tambi\xe9n el cobro del cheque."}),Object(m.jsxs)("p",{className:"col-lg-10 fs-4 text-white",children:["El hash se puede firmar fuera de la red como ver\xe1 en otros tutoriales. Sin embargo, yo utilizo otro contrato en la testnet. Si tambi\xe9n desea verlo ",Object(m.jsx)("a",{href:"https://testnet.bscscan.com/address/0x854F2CBa80dAe7989Dd5729Ed2a71A1923d43243#code ",target:"_blank",children:"aqu\xed"})," lo tiene. "]})]}),Object(m.jsxs)("div",{className:"col-md-10 mx-auto col-lg-5",children:[Object(m.jsxs)("form",{className:"p-4 p-md-5 border rounded-3 bg-light",children:[Object(m.jsxs)("div",{className:"form-floating mb-3 d-inline-flex",children:[Object(m.jsx)("input",{value:B,onChange:function(e){return S(e.target.value)},type:"text",className:"form-control",id:"contractAddress",disabled:!0}),Object(m.jsx)("button",{type:"button",className:"btn btn-secondary mx-3","data-bs-toggle":"modal","data-bs-target":"#contratoModal",children:Object(m.jsx)("i",{className:"fa fa-info"})}),Object(m.jsx)("label",{htmlFor:"contractAddress",children:"Contrato de cobro"})]}),Object(m.jsxs)("div",{className:"form-floating mb-3",children:[Object(m.jsx)("input",{value:t,onChange:function(e){return s(e.target.value)},type:"text",className:"form-control",id:"recipient"}),Object(m.jsx)("label",{htmlFor:"recipient",children:"Beneficiario"})]}),Object(m.jsxs)("div",{className:"form-floating mb-3 d-inline-flex",children:[Object(m.jsx)("input",{value:o,onChange:function(e){return b(e.target.value)},type:"number",className:"form-control",id:"serie"}),Object(m.jsx)("label",{htmlFor:"serie",children:"Serie del cheque"}),Object(m.jsx)("button",{type:"button",className:"btn btn-secondary mx-3","data-bs-toggle":"modal","data-bs-target":"#serieModal",children:Object(m.jsx)("i",{className:"fa fa-info"})})]}),Object(m.jsxs)("div",{className:"form-floating mb-3",children:[Object(m.jsx)("input",{value:N,onChange:function(e){return v(e.target.value.replace(",","."))},type:"text",className:"form-control",id:"amountToPay"}),Object(m.jsx)("label",{htmlFor:"amountToPay",children:"BNBs a cobrar"})]}),Object(m.jsx)("button",{id:"btn-firma",onClick:function(){return function(){return J.apply(this,arguments)}()},className:"w-100 btn btn-lg btn-primary",type:"button",children:"Firmar"}),Object(m.jsx)("hr",{className:"my-4"})]}),Object(m.jsx)("div",{})]})]})})]}),Object(m.jsx)("div",{className:I?"d-none":"",children:Object(m.jsx)(g,{})}),Object(m.jsx)("div",{className:"modal fade",id:"contratoModal","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"contratoModalLabel","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",id:"contratoModalLabel",children:"Contrato de pago en Hash"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsxs)("div",{className:"modal-body",children:["Existe un ataque que puede producirse de la forma siguiente:",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),"Usted realiza algunos pagos con un contrato y luego decide destruirlo. M\xe1s tarde, implementa un nuevo contrato inteligente, con el mismo c\xf3digo, para realizar otros pagos. \xc9ste nuevo contrato desconoce las series de los cheques que se han pagado en la implementaci\xf3n anterior, por lo que el usuario puede volver a usar los mismos datos con el hash firmado para realizar un doble cobro. Nos podemos proteger contra esto al incluir la direcci\xf3n del contrato en el mensaje, y por tanto, solo se aceptar\xe1n los cheques firmados que correspondan con el contrato implementado para ellos."]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(m.jsx)("div",{className:"modal fade",id:"serieModal","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"serieModalLabel","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",id:"serieModalLabel",children:"Serie de los cheques"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsxs)("div",{className:"modal-body",children:["Nosotros creamos un n\xfamero de serie \xfanico con un ",Object(m.jsx)("i",{children:"stamp time"})," cuando cargamos la p\xe1gina. Pero usted puede crear todos los cheques que desee con cualquier otra numeraci\xf3n. Sin embargo, tenga en cuenta que si usted firma un cheque con un n\xfamero de serie que ya se ha utilizado para abonar otro cheque por parte de otro usuario ",Object(m.jsx)("strong",{children:"el suyo no podr\xe1 ser abonado"}),".",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),"Puede comprobar si un n\xfamero de serie se ha utilizado desde las funciones ",Object(m.jsx)("i",{children:"getters"})," que tenemos en el contrato. ",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),"Para saber si una serie ya se ha utilizado use la funci\xf3n: ",Object(m.jsx)("i",{children:"usedNonces"}),", para saber quien lo ha cobrado con la funci\xf3n: ",Object(m.jsx)("i",{children:"noncesRecipients"}),", y la cantidad que se ha abonado con la funci\xf3n: ",Object(m.jsx)("i",{children:"noncesAmount"}),". Aqu\xed dispone del enlace para que haga esas comprobaciones si es su deseo:",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("a",{href:"https://testnet.bscscan.com/address/0x00e55244c13FfA6D6313718459D82536F43F6dcf#readContract",target:"_blank",children:Object(m.jsx)("i",{children:"Read Functions"})})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(m.jsx)("section",{className:"container",children:Object(m.jsxs)("footer",{className:"text-center text-white",style:{backgroundColor:"#0a4275"},children:[Object(m.jsx)("div",{className:"container p-4 pb-0",children:Object(m.jsx)("section",{className:"",children:Object(m.jsxs)("a",{className:"text-decoration-none",href:"https://github.com/Cainuriel/ERC-Contracts/tree/main/payment-channel",target:"_blank",children:[" ",Object(m.jsxs)("p",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("span",{className:"me-3",children:"C\xf3digo en Github "}),Object(m.jsx)("i",{className:"fab fa-github"})]})]})})}),Object(m.jsxs)("div",{className:"text-center p-3",style:{backgroundColor:"rgba(0, 0, 0, 0.2)"},children:["2021 ",Object(m.jsxs)("a",{className:"text-white text-decoration-none",href:"https://cainuriel.github.io/",children:[" ",Object(m.jsx)("img",{src:"./favicon.ico"}),"Developer Superloper"]})]})]})})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,78)).then((function(a){var t=a.getCLS,n=a.getFID,s=a.getFCP,r=a.getLCP,c=a.getTTFB;t(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root")),v()}},[[76,1,2]]]);
//# sourceMappingURL=main.e24f9964.chunk.js.map